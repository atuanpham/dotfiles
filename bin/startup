#!/bin/bash

# Define constants
HOME_DIR=/home/$USER

# install anaconda
wget https://3230d63b5fc54e62148e-c95ac804525aac4b6dba79b00b39d1d3.ssl.cf1.rackcdn.com/Anaconda2-4.0.0-Linux-x86_64.sh
# wait
bash ~/Downloads/Anaconda2-4.0.0-Linux-x86_64.sh

# Install Powerline
echo "Installing Powerline..."
pip install powerline-status
echo "Powerline has been installed."

# Download fonts for powerline
echo "Downloading additional fonts..."
wget https://github.com/powerline/powerline/raw/develop/font/PowerlineSymbols.otf
wget https://github.com/powerline/powerline/raw/develop/font/10-powerline-symbols.conf

# Create fonts directory
if [[ ! -d "$HOME_DIR/.fonts" ]]; then
	mkdir ~/.fonts
	echo "Created fonts directory."
fi

if [[ ! -d "$HOME_DIR/.config/fontconfig/conf.d" ]]; then
	mkdir -p ~/.config/fontconfig/conf.d
	echo "Created font config directory."
fi

# Move font to fonts directory
mv -f PowerlineSymbols.otf ~/.fonts/

# Update font cache
fc-cache -vf ~/.fonts/

# Install fontconfig
mv -f 10-powerline-symbols.conf ~/.config/fontconfig/conf.d/

# Add to .bashrc
REPOSITORY_ROOT=`pip show powerline-status | grep Location | sed 's/\Location: //g'`
echo "powerline-daemon -q" >> ~/.bashrc
echo "POWERLINE_BASH_CONTINUATION=1" >> ~/.bashrc
echo "POWERLINE_BASH_SELECT=1" >> ~/.bashrc
echo ". $REPOSITORY_ROOT/powerline/bindings/bash/powerline.sh" >> ~/.bashrc
. ~/.bashrc
echo "Updated bashrc file."

# Install Tmux
echo "Installing Tmux"
sudo dnf install -y tmux tmux-powerline
wait
echo "source '/usr/share/tmux/powerline.conf'" >> ~/.tmux.conf
echo "set -g default-terminal 'screen-256color'" >> ~/.tmux.conf

# Install Vim
echo "Installing VIM"
sudo dnf install -y vim

# Import VIM configs
echo "set rtp+=$REPOSITORY_DIR/powerline/bindings/vim" >> ~/.vimrc
echo "set laststatus=2" >> ~/.vimrc
echo "set t_Co=256" >> ~/.vimrc

# Install AG
echo "Installing the_silver_searcher"
sudo dnf install the_silver_searcher
